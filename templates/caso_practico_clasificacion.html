{% extends "base.html" %}
{% block content %}
<h2>Caso Práctico: Detección de Spam (Naive Bayes)</h2>

<div class="card p-3 my-3">
  <h4>Exactitud: {{ metrics.accuracy }}</h4>
  <img src="{{ url_for('static', filename='confusion_spam.png') }}" class="img-fluid">
</div>

<form method="post" class="row g-3">
  {% for var in ["freq_gratis","freq_promocion","freq_urgente",
                 "tiene_link","remitente_conocido","num_adjuntos"] %}
  <div class="col-md-4">
    <label>{{ var }}</label>
    <input type="number" step="any" name="{{ var }}" required class="form-control">
  </div>
  {% endfor %}
  <div class="col-md-3">
    <label>Threshold (0–1)</label>
    <input type="number" step="0.01" min="0" max="1" name="threshold" value="0.5" class="form-control">
  </div>
  <div class="col-12">
    <button class="btn btn-primary mt-2">Predecir</button>
  </div>
</form>

{% if prediction %}
<hr>
<h3>Predicción: {{ prediction.label }}</h3>
<p>Probabilidad de Spam: {{ prediction.prob }}</p>
<p>Threshold usado: {{ prediction.threshold }}</p>
{% endif %}
{% endblock %}
